/* Created by Perspecta http://www.perspecta.com */
/*
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
*/
package com.healthconcourse.vista.fhir.api.test.parser;

import com.healthconcourse.vista.fhir.api.parser.PractitionerParser;
import org.hl7.fhir.dstu3.model.Address;
import org.hl7.fhir.dstu3.model.Enumerations;
import org.hl7.fhir.dstu3.model.Practitioner;
import org.junit.Assert;
import org.junit.Test;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.List;
import java.util.Optional;

public class PractitionerParserTest {

    @Test
    public void TestSuccessfulPractitionerParse() {
        String input = "{ \"EncProv\": [ { \"Vprov\": { \"auditTrail\": \"14-A 119;\", \"comments\": \"\", \"dataSource\": \"LAB DATA\", \"dataSourceId\": 14, \"editedFlag\": \"\", \"editedFlagCd\": \"\", \"eventDateAndTime\": \"\", \"eventDateAndTimeFHIR\": \"\", \"eventDateAndTimeFM\": \"\", \"eventDateAndTimeHL7\": \"\", \"operatingAttending\": \"\", \"operatingAttendingCd\": \"\", \"package\": \"LAB SERVICE\", \"packageId\": 26, \"patientICN\": \"5000001533V676621\", \"patientName\": \"SARAH,JANE O\", \"patientNameId\": 100880, \"personClass\": \"Physicians (M.D. and D.O.)\", \"personClassId\": 1, \"personClassSpecialty\": \"\", \"primarySecondary\": \"PRIMARY\", \"primarySecondaryCd\": \"P\", \"primarySecondarySc\": \"Primary\", \"provAddress1\": \"\", \"provAddress2\": \"\", \"provCity\": \"\", \"provNpi\": 9990000397, \"provOffPhone\": \"\", \"provRole\": \"Physician\", \"provState\": \"NEW YORK\", \"provZip\": 99998, \"provider\": \"PROVIDER,FIVE\", \"providerId\": 988, \"providerNPI\": 9990000397, \"providerResId\": \"V-500-200-988\", \"resourceId\": \"V-500-9000010.06-11295\", \"resourceType\": \"Encounter\", \"verified\": \"\", \"verifiedCd\": \"\", \"visit\": \"NOV 19,2013@09:27\", \"visitFHIR\": \"2013-11-19T09:27:00-05:00\", \"visitFM\": 3131119.0927, \"visitHL7\": \"201311190927-0500\", \"visitId\": 11527, \"visitResId\": \"V-500-9000010-11527\", \"vprovIen\": 11295 } }, { \"Vprov\": { \"auditTrail\": \"14-A 119;\", \"comments\": \"\", \"dataSource\": \"LAB DATA\", \"dataSourceId\": 14, \"editedFlag\": \"\", \"editedFlagCd\": \"\", \"eventDateAndTime\": \"\", \"eventDateAndTimeFHIR\": \"\", \"eventDateAndTimeFM\": \"\", \"eventDateAndTimeHL7\": \"\", \"operatingAttending\": \"\", \"operatingAttendingCd\": \"\", \"package\": \"LAB SERVICE\", \"packageId\": 26, \"patientICN\": \"5000001533V676621\", \"patientName\": \"SARAH,JANE O\", \"patientNameId\": 100880, \"personClass\": \"Physicians (M.D. and D.O.)\", \"personClassId\": 1, \"personClassSpecialty\": \"\", \"primarySecondary\": \"SECONDARY\", \"primarySecondaryCd\": \"S\", \"primarySecondarySc\": \"Secondary\", \"provAddress1\": \"\", \"provAddress2\": \"\", \"provCity\": \"\", \"provNpi\": 9990000504, \"provOffPhone\": \"\", \"provRole\": \"Physician\", \"provState\": \"\", \"provZip\": \"\", \"provider\": \"PROVIDER,SIXTEEN\", \"providerId\": 999, \"providerNPI\": 9990000504, \"providerResId\": \"V-500-200-999\", \"resourceId\": \"V-500-9000010.06-11296\", \"resourceType\": \"Encounter\", \"verified\": \"\", \"verifiedCd\": \"\", \"visit\": \"NOV 19,2013@09:27\", \"visitFHIR\": \"2013-11-19T09:27:00-05:00\", \"visitFM\": 3131119.0927, \"visitHL7\": \"201311190927-0500\", \"visitId\": 11527, \"visitResId\": \"V-500-9000010-11527\", \"vprovIen\": 11296 } }, { \"Vprov\": { \"auditTrail\": \"14-A 119;\", \"comments\": \"\", \"dataSource\": \"LAB DATA\", \"dataSourceId\": 14, \"editedFlag\": \"\", \"editedFlagCd\": \"\", \"eventDateAndTime\": \"\", \"eventDateAndTimeFHIR\": \"\", \"eventDateAndTimeFM\": \"\", \"eventDateAndTimeHL7\": \"\", \"operatingAttending\": \"\", \"operatingAttendingCd\": \"\", \"package\": \"LAB SERVICE\", \"packageId\": 26, \"patientICN\": \"5000001533V676621\", \"patientName\": \"SARAH,JANE O\", \"patientNameId\": 100880, \"personClass\": \"Physicians (M.D. and D.O.)\", \"personClassId\": 1, \"personClassSpecialty\": \"\", \"primarySecondary\": \"PRIMARY\", \"primarySecondaryCd\": \"P\", \"primarySecondarySc\": \"Primary\", \"provAddress1\": \"\", \"provAddress2\": \"\", \"provCity\": \"\", \"provNpi\": 9990000397, \"provOffPhone\": \"\", \"provRole\": \"Physician\", \"provState\": \"NEW YORK\", \"provZip\": 99998, \"provider\": \"PROVIDER,FIVE\", \"providerId\": 988, \"providerNPI\": 9990000397, \"providerResId\": \"V-500-200-988\", \"resourceId\": \"V-500-9000010.06-11303\", \"resourceType\": \"Encounter\", \"verified\": \"\", \"verifiedCd\": \"\", \"visit\": \"NOV 19,2013@09:24\", \"visitFHIR\": \"2013-11-19T09:24:00-05:00\", \"visitFM\": 3131119.0924, \"visitHL7\": \"201311190924-0500\", \"visitId\": 11537, \"visitResId\": \"V-500-9000010-11537\", \"vprovIen\": 11303 } }, { \"Vprov\": { \"auditTrail\": \"14-A 119;\", \"comments\": \"\", \"dataSource\": \"LAB DATA\", \"dataSourceId\": 14, \"editedFlag\": \"\", \"editedFlagCd\": \"\", \"eventDateAndTime\": \"\", \"eventDateAndTimeFHIR\": \"\", \"eventDateAndTimeFM\": \"\", \"eventDateAndTimeHL7\": \"\", \"operatingAttending\": \"\", \"operatingAttendingCd\": \"\", \"package\": \"LAB SERVICE\", \"packageId\": 26, \"patientICN\": \"5000001533V676621\", \"patientName\": \"SARAH,JANE O\", \"patientNameId\": 100880, \"personClass\": \"Physicians (M.D. and D.O.)\", \"personClassId\": 1, \"personClassSpecialty\": \"\", \"primarySecondary\": \"SECONDARY\", \"primarySecondaryCd\": \"S\", \"primarySecondarySc\": \"Secondary\", \"provAddress1\": \"\", \"provAddress2\": \"\", \"provCity\": \"\", \"provNpi\": 9990000504, \"provOffPhone\": \"\", \"provRole\": \"Physician\", \"provState\": \"\", \"provZip\": \"\", \"provider\": \"PROVIDER,SIXTEEN\", \"providerId\": 999, \"providerNPI\": 9990000504, \"providerResId\": \"V-500-200-999\", \"resourceId\": \"V-500-9000010.06-11304\", \"resourceType\": \"Encounter\", \"verified\": \"\", \"verifiedCd\": \"\", \"visit\": \"NOV 19,2013@09:24\", \"visitFHIR\": \"2013-11-19T09:24:00-05:00\", \"visitFM\": 3131119.0924, \"visitHL7\": \"201311190924-0500\", \"visitId\": 11537, \"visitResId\": \"V-500-9000010-11537\", \"vprovIen\": 11304 } }, { \"Vprov\": { \"auditTrail\": \"14-A 119;\", \"comments\": \"\", \"dataSource\": \"LAB DATA\", \"dataSourceId\": 14, \"editedFlag\": \"\", \"editedFlagCd\": \"\", \"eventDateAndTime\": \"\", \"eventDateAndTimeFHIR\": \"\", \"eventDateAndTimeFM\": \"\", \"eventDateAndTimeHL7\": \"\", \"operatingAttending\": \"\", \"operatingAttendingCd\": \"\", \"package\": \"LAB SERVICE\", \"packageId\": 26, \"patientICN\": \"5000001533V676621\", \"patientName\": \"SARAH,JANE O\", \"patientNameId\": 100880, \"personClass\": \"Physicians (M.D. and D.O.)\", \"personClassId\": 1, \"personClassSpecialty\": \"\", \"primarySecondary\": \"PRIMARY\", \"primarySecondaryCd\": \"P\", \"primarySecondarySc\": \"Primary\", \"provAddress1\": \"\", \"provAddress2\": \"\", \"provCity\": \"\", \"provNpi\": 9990000397, \"provOffPhone\": \"\", \"provRole\": \"Physician\", \"provState\": \"NEW YORK\", \"provZip\": 99998, \"provider\": \"PROVIDER,FIVE\", \"providerId\": 988, \"providerNPI\": 9990000397, \"providerResId\": \"V-500-200-988\", \"resourceId\": \"V-500-9000010.06-11305\", \"resourceType\": \"Encounter\", \"verified\": \"\", \"verifiedCd\": \"\", \"visit\": \"SEP 29,2014@12:57\", \"visitFHIR\": \"2014-09-29T12:57:00-05:00\", \"visitFM\": 3140929.1257, \"visitHL7\": \"201409291257-0500\", \"visitId\": 11538, \"visitResId\": \"V-500-9000010-11538\", \"vprovIen\": 11305 } }, { \"Vprov\": { \"auditTrail\": \"14-A 119;\", \"comments\": \"\", \"dataSource\": \"LAB DATA\", \"dataSourceId\": 14, \"editedFlag\": \"\", \"editedFlagCd\": \"\", \"eventDateAndTime\": \"\", \"eventDateAndTimeFHIR\": \"\", \"eventDateAndTimeFM\": \"\", \"eventDateAndTimeHL7\": \"\", \"operatingAttending\": \"\", \"operatingAttendingCd\": \"\", \"package\": \"LAB SERVICE\", \"packageId\": 26, \"patientICN\": \"5000001533V676621\", \"patientName\": \"SARAH,JANE O\", \"patientNameId\": 100880, \"personClass\": \"Physicians (M.D. and D.O.)\", \"personClassId\": 1, \"personClassSpecialty\": \"\", \"primarySecondary\": \"SECONDARY\", \"primarySecondaryCd\": \"S\", \"primarySecondarySc\": \"Secondary\", \"provAddress1\": \"\", \"provAddress2\": \"\", \"provCity\": \"\", \"provNpi\": 9990000504, \"provOffPhone\": \"\", \"provRole\": \"Physician\", \"provState\": \"\", \"provZip\": \"\", \"provider\": \"PROVIDER,SIXTEEN\", \"providerId\": 999, \"providerNPI\": 9990000504, \"providerResId\": \"V-500-200-999\", \"resourceId\": \"V-500-9000010.06-11306\", \"resourceType\": \"Encounter\", \"verified\": \"\", \"verifiedCd\": \"\", \"visit\": \"SEP 29,2014@12:57\", \"visitFHIR\": \"2014-09-29T12:57:00-05:00\", \"visitFM\": 3140929.1257, \"visitHL7\": \"201409291257-0500\", \"visitId\": 11538, \"visitResId\": \"V-500-9000010-11538\", \"vprovIen\": 11306 } }, { \"Vprov\": { \"auditTrail\": \"14-A 119;\", \"comments\": \"\", \"dataSource\": \"LAB DATA\", \"dataSourceId\": 14, \"editedFlag\": \"\", \"editedFlagCd\": \"\", \"eventDateAndTime\": \"\", \"eventDateAndTimeFHIR\": \"\", \"eventDateAndTimeFM\": \"\", \"eventDateAndTimeHL7\": \"\", \"operatingAttending\": \"\", \"operatingAttendingCd\": \"\", \"package\": \"LAB SERVICE\", \"packageId\": 26, \"patientICN\": \"5000001533V676621\", \"patientName\": \"SARAH,JANE O\", \"patientNameId\": 100880, \"personClass\": \"Physicians (M.D. and D.O.)\", \"personClassId\": 1, \"personClassSpecialty\": \"\", \"primarySecondary\": \"PRIMARY\", \"primarySecondaryCd\": \"P\", \"primarySecondarySc\": \"Primary\", \"provAddress1\": \"\", \"provAddress2\": \"\", \"provCity\": \"\", \"provNpi\": 9990000397, \"provOffPhone\": \"\", \"provRole\": \"Physician\", \"provState\": \"NEW YORK\", \"provZip\": 99998, \"provider\": \"PROVIDER,FIVE\", \"providerId\": 988, \"providerNPI\": 9990000397, \"providerResId\": \"V-500-200-988\", \"resourceId\": \"V-500-9000010.06-11310\", \"resourceType\": \"Encounter\", \"verified\": \"\", \"verifiedCd\": \"\", \"visit\": \"MAR 13,2015@13:44\", \"visitFHIR\": \"2015-03-13T13:44:00-05:00\", \"visitFM\": 3150313.1344, \"visitHL7\": \"201503131344-0500\", \"visitId\": 11539, \"visitResId\": \"V-500-9000010-11539\", \"vprovIen\": 11310 } }, { \"Vprov\": { \"auditTrail\": \"14-A 119;\", \"comments\": \"\", \"dataSource\": \"LAB DATA\", \"dataSourceId\": 14, \"editedFlag\": \"\", \"editedFlagCd\": \"\", \"eventDateAndTime\": \"\", \"eventDateAndTimeFHIR\": \"\", \"eventDateAndTimeFM\": \"\", \"eventDateAndTimeHL7\": \"\", \"operatingAttending\": \"\", \"operatingAttendingCd\": \"\", \"package\": \"LAB SERVICE\", \"packageId\": 26, \"patientICN\": \"5000001533V676621\", \"patientName\": \"SARAH,JANE O\", \"patientNameId\": 100880, \"personClass\": \"Physicians (M.D. and D.O.)\", \"personClassId\": 1, \"personClassSpecialty\": \"\", \"primarySecondary\": \"SECONDARY\", \"primarySecondaryCd\": \"S\", \"primarySecondarySc\": \"Secondary\", \"provAddress1\": \"\", \"provAddress2\": \"\", \"provCity\": \"\", \"provNpi\": 9990000504, \"provOffPhone\": \"\", \"provRole\": \"Physician\", \"provState\": \"\", \"provZip\": \"\", \"provider\": \"PROVIDER,SIXTEEN\", \"providerId\": 999, \"providerNPI\": 9990000504, \"providerResId\": \"V-500-200-999\", \"resourceId\": \"V-500-9000010.06-11311\", \"resourceType\": \"Encounter\", \"verified\": \"\", \"verifiedCd\": \"\", \"visit\": \"MAR 13,2015@13:44\", \"visitFHIR\": \"2015-03-13T13:44:00-05:00\", \"visitFM\": 3150313.1344, \"visitHL7\": \"201503131344-0500\", \"visitId\": 11539, \"visitResId\": \"V-500-9000010-11539\", \"vprovIen\": 11311 } }, { \"Vprov\": { \"auditTrail\": \"19-A 989;\", \"comments\": \"\", \"dataSource\": \"TEXT INTEGRATION UTILITIES\", \"dataSourceId\": 19, \"editedFlag\": \"\", \"editedFlagCd\": \"\", \"eventDateAndTime\": \"\", \"eventDateAndTimeFHIR\": \"\", \"eventDateAndTimeFM\": \"\", \"eventDateAndTimeHL7\": \"\", \"operatingAttending\": \"\", \"operatingAttendingCd\": \"\", \"package\": \"ORDER ENTRY\\/RESULTS REPORTING\", \"packageId\": 170, \"patientICN\": \"5000001533V676621\", \"patientName\": \"SARAH,JANE O\", \"patientNameId\": 100880, \"personClass\": \"Physicians (M.D. and D.O.)\", \"personClassId\": 1, \"personClassSpecialty\": \"\", \"primarySecondary\": \"PRIMARY\", \"primarySecondaryCd\": \"P\", \"primarySecondarySc\": \"Primary\", \"provAddress1\": \"\", \"provAddress2\": \"\", \"provCity\": \"\", \"provNpi\": 9990000397, \"provOffPhone\": \"\", \"provRole\": \"Physician\", \"provState\": \"NEW YORK\", \"provZip\": 99998, \"provider\": \"PROVIDER,FIVE\", \"providerId\": 988, \"providerNPI\": 9990000397, \"providerResId\": \"V-500-200-988\", \"resourceId\": \"V-500-9000010.06-11320\", \"resourceType\": \"Encounter\", \"verified\": \"\", \"verifiedCd\": \"\", \"visit\": \"NOV 19,2013@08:00\", \"visitFHIR\": \"2013-11-19T08:00:00-05:00\", \"visitFM\": 3131119.08, \"visitHL7\": \"201311190800-0500\", \"visitId\": 11525, \"visitResId\": \"V-500-9000010-11525\", \"vprovIen\": 11320 } }, { \"Vprov\": { \"auditTrail\": \"19-A 989;\", \"comments\": \"\", \"dataSource\": \"TEXT INTEGRATION UTILITIES\", \"dataSourceId\": 19, \"editedFlag\": \"\", \"editedFlagCd\": \"\", \"eventDateAndTime\": \"\", \"eventDateAndTimeFHIR\": \"\", \"eventDateAndTimeFM\": \"\", \"eventDateAndTimeHL7\": \"\", \"operatingAttending\": \"\", \"operatingAttendingCd\": \"\", \"package\": \"ORDER ENTRY\\/RESULTS REPORTING\", \"packageId\": 170, \"patientICN\": \"5000001533V676621\", \"patientName\": \"SARAH,JANE O\", \"patientNameId\": 100880, \"personClass\": \"Physicians (M.D. and D.O.)\", \"personClassId\": 1, \"personClassSpecialty\": \"\", \"primarySecondary\": \"PRIMARY\", \"primarySecondaryCd\": \"P\", \"primarySecondarySc\": \"Primary\", \"provAddress1\": \"\", \"provAddress2\": \"\", \"provCity\": \"\", \"provNpi\": 9990000397, \"provOffPhone\": \"\", \"provRole\": \"Physician\", \"provState\": \"NEW YORK\", \"provZip\": 99998, \"provider\": \"PROVIDER,FIVE\", \"providerId\": 988, \"providerNPI\": 9990000397, \"providerResId\": \"V-500-200-988\", \"resourceId\": \"V-500-9000010.06-11321\", \"resourceType\": \"Encounter\", \"verified\": \"\", \"verifiedCd\": \"\", \"visit\": \"SEP 22,2014@13:00\", \"visitFHIR\": \"2014-09-22T13:00:00-05:00\", \"visitFM\": 3140922.13, \"visitHL7\": \"201409221300-0500\", \"visitId\": 11531, \"visitResId\": \"V-500-9000010-11531\", \"vprovIen\": 11321 } }, { \"Vprov\": { \"auditTrail\": \"19-A 989;\", \"comments\": \"\", \"dataSource\": \"TEXT INTEGRATION UTILITIES\", \"dataSourceId\": 19, \"editedFlag\": \"\", \"editedFlagCd\": \"\", \"eventDateAndTime\": \"\", \"eventDateAndTimeFHIR\": \"\", \"eventDateAndTimeFM\": \"\", \"eventDateAndTimeHL7\": \"\", \"operatingAttending\": \"\", \"operatingAttendingCd\": \"\", \"package\": \"ORDER ENTRY\\/RESULTS REPORTING\", \"packageId\": 170, \"patientICN\": \"5000001533V676621\", \"patientName\": \"SARAH,JANE O\", \"patientNameId\": 100880, \"personClass\": \"Physicians (M.D. and D.O.)\", \"personClassId\": 1, \"personClassSpecialty\": \"\", \"primarySecondary\": \"PRIMARY\", \"primarySecondaryCd\": \"P\", \"primarySecondarySc\": \"Primary\", \"provAddress1\": \"\", \"provAddress2\": \"\", \"provCity\": \"\", \"provNpi\": 9990000397, \"provOffPhone\": \"\", \"provRole\": \"Physician\", \"provState\": \"NEW YORK\", \"provZip\": 99998, \"provider\": \"PROVIDER,FIVE\", \"providerId\": 988, \"providerNPI\": 9990000397, \"providerResId\": \"V-500-200-988\", \"resourceId\": \"V-500-9000010.06-11322\", \"resourceType\": \"Encounter\", \"verified\": \"\", \"verifiedCd\": \"\", \"visit\": \"MAR 1,2015@13:00\", \"visitFHIR\": \"2015-03-01T13:00:00-05:00\", \"visitFM\": 3150301.13, \"visitHL7\": \"201503011300-0500\", \"visitId\": 11533, \"visitResId\": \"V-500-9000010-11533\", \"vprovIen\": 11322 } }, { \"Vprov\": { \"auditTrail\": \"19-A 988;\", \"comments\": \"\", \"dataSource\": \"TEXT INTEGRATION UTILITIES\", \"dataSourceId\": 19, \"editedFlag\": \"\", \"editedFlagCd\": \"\", \"eventDateAndTime\": \"\", \"eventDateAndTimeFHIR\": \"\", \"eventDateAndTimeFM\": \"\", \"eventDateAndTimeHL7\": \"\", \"operatingAttending\": \"\", \"operatingAttendingCd\": \"\", \"package\": \"ORDER ENTRY\\/RESULTS REPORTING\", \"packageId\": 170, \"patientICN\": \"5000001533V676621\", \"patientName\": \"SARAH,JANE O\", \"patientNameId\": 100880, \"personClass\": \"Nursing Service Providers\", \"personClassId\": 274, \"personClassSpecialty\": \"\", \"primarySecondary\": \"PRIMARY\", \"primarySecondaryCd\": \"P\", \"primarySecondarySc\": \"Primary\", \"provAddress1\": \"\", \"provAddress2\": \"\", \"provCity\": \"\", \"provNpi\": 9990008879, \"provOffPhone\": \"\", \"provRole\": \"NURSE\", \"provState\": \"\", \"provZip\": \"\", \"provider\": \"NURSE,EIGHT\", \"providerId\": 20171, \"providerNPI\": 9990008879, \"providerResId\": \"V-500-200-20171\", \"resourceId\": \"V-500-9000010.06-11391\", \"resourceType\": \"Encounter\", \"verified\": \"\", \"verifiedCd\": \"\", \"visit\": \"JUL 13,2015@08:21\", \"visitFHIR\": \"2015-07-13T08:21:00-05:00\", \"visitFM\": 3150713.0821, \"visitHL7\": \"201507130821-0500\", \"visitId\": 11615, \"visitResId\": \"V-500-9000010-11615\", \"vprovIen\": 11391 } }, { \"Vprov\": { \"auditTrail\": \"14-A 119;\", \"comments\": \"\", \"dataSource\": \"LAB DATA\", \"dataSourceId\": 14, \"editedFlag\": \"\", \"editedFlagCd\": \"\", \"eventDateAndTime\": \"\", \"eventDateAndTimeFHIR\": \"\", \"eventDateAndTimeFM\": \"\", \"eventDateAndTimeHL7\": \"\", \"operatingAttending\": \"\", \"operatingAttendingCd\": \"\", \"package\": \"LAB SERVICE\", \"packageId\": 26, \"patientICN\": \"5000001533V676621\", \"patientName\": \"SARAH,JANE O\", \"patientNameId\": 100880, \"personClass\": \"Physicians (M.D. and D.O.)\", \"personClassId\": 1, \"personClassSpecialty\": \"\", \"primarySecondary\": \"PRIMARY\", \"primarySecondaryCd\": \"P\", \"primarySecondarySc\": \"Primary\", \"provAddress1\": \"\", \"provAddress2\": \"\", \"provCity\": \"\", \"provNpi\": 9990000397, \"provOffPhone\": \"\", \"provRole\": \"Physician\", \"provState\": \"NEW YORK\", \"provZip\": 99998, \"provider\": \"PROVIDER,FIVE\", \"providerId\": 988, \"providerNPI\": 9990000397, \"providerResId\": \"V-500-200-988\", \"resourceId\": \"V-500-9000010.06-11392\", \"resourceType\": \"Encounter\", \"verified\": \"\", \"verifiedCd\": \"\", \"visit\": \"JUL 20,2015@08:39\", \"visitFHIR\": \"2015-07-20T08:39:00-05:00\", \"visitFM\": 3150720.0839, \"visitHL7\": \"201507200839-0500\", \"visitId\": 11616, \"visitResId\": \"V-500-9000010-11616\", \"vprovIen\": 11392 } }, { \"Vprov\": { \"auditTrail\": \"14-A 119;\", \"comments\": \"\", \"dataSource\": \"LAB DATA\", \"dataSourceId\": 14, \"editedFlag\": \"\", \"editedFlagCd\": \"\", \"eventDateAndTime\": \"\", \"eventDateAndTimeFHIR\": \"\", \"eventDateAndTimeFM\": \"\", \"eventDateAndTimeHL7\": \"\", \"operatingAttending\": \"\", \"operatingAttendingCd\": \"\", \"package\": \"LAB SERVICE\", \"packageId\": 26, \"patientICN\": \"5000001533V676621\", \"patientName\": \"SARAH,JANE O\", \"patientNameId\": 100880, \"personClass\": \"Physicians (M.D. and D.O.)\", \"personClassId\": 1, \"personClassSpecialty\": \"\", \"primarySecondary\": \"SECONDARY\", \"primarySecondaryCd\": \"S\", \"primarySecondarySc\": \"Secondary\", \"provAddress1\": \"\", \"provAddress2\": \"\", \"provCity\": \"\", \"provNpi\": 9990000504, \"provOffPhone\": \"\", \"provRole\": \"Physician\", \"provState\": \"\", \"provZip\": \"\", \"provider\": \"PROVIDER,SIXTEEN\", \"providerId\": 999, \"providerNPI\": 9990000504, \"providerResId\": \"V-500-200-999\", \"resourceId\": \"V-500-9000010.06-11393\", \"resourceType\": \"Encounter\", \"verified\": \"\", \"verifiedCd\": \"\", \"visit\": \"JUL 20,2015@08:39\", \"visitFHIR\": \"2015-07-20T08:39:00-05:00\", \"visitFM\": 3150720.0839, \"visitHL7\": \"201507200839-0500\", \"visitId\": 11616, \"visitResId\": \"V-500-9000010-11616\", \"vprovIen\": 11393 } } ] }";

        PractitionerParser parser = new PractitionerParser();

        List<Practitioner> result = parser.parseList(input);

        Assert.assertEquals("Correct number of items", 3, result.size());
        Practitioner practitioner = result.get(1);
        Assert.assertEquals("Correct given name", "FIVE", practitioner.getName().get(0).getGivenAsSingleString());
        Assert.assertEquals("Correct family name", "PROVIDER", practitioner.getName().get(0).getFamily());
        Assert.assertEquals("Correct ID", "V-500-200-988", practitioner.getId());
    }

    @Test
    public void TestPractitionerParseBlankInput() {
        String input = "";

        PractitionerParser parser = new PractitionerParser();

        List<Practitioner> result = parser.parseList(input);

        Assert.assertEquals("Correct number of items", 0, result.size());
    }

    @Test
    public void TestPractitionerParseNullInput() {
        PractitionerParser parser = new PractitionerParser();

        List<Practitioner> result = parser.parseList(null);

        Assert.assertEquals("Correct number of items", 0, result.size());
    }

    @Test
    public void TestPractitionerParseNotFound() {
        PractitionerParser parser = new PractitionerParser();

        List<Practitioner> result = parser.parseList("-1^Patient identifier not recognised");

        Assert.assertEquals("Correct number of items", 0, result.size());
    }

    @Test
    public void TestSinglePractitionerParseSuccessful() {
        String input = "{ \"Np\": { \"accessCode\": \"\", \"accessibleFiles\": { \"accessibleFile\": [ { \"accessibleFile\": \"V PROVIDER\", \"accessibleFileId\": 9000010.06, \"auditAccess\": \"\", \"auditAccessCd\": \"\", \"dataDictionaryAccess\": \"\", \"dataDictionaryAccessCd\": \"\", \"deleteAccess\": \"\", \"deleteAccessCd\": \"\", \"fileNumber\": 9000010.06, \"laygoAccess\": \"\", \"laygoAccessCd\": \"\", \"readAccess\": \"YES\", \"readAccessCd\": 1, \"resourceId\": \"V-500-200-11520-200.032-9000010.06\", \"writeAccess\": \"YES\", \"writeAccessCd\": 1 } ] }, \"adupn\": \"\", \"allowAraAccess\": \"\", \"allowAraAccessCd\": \"\", \"allowVerifyingOfOthers\": \"\", \"allowVerifyingOfOthersCd\": \"\", \"allowedToUseSpooler\": \"YES\", \"allowedToUseSpoolerCd\": \"y\", \"alwaysShowSecondaries\": \"\", \"alwaysShowSecondariesCd\": \"\", \"appointmentStatus\": \"\", \"appointmentStatusCd\": \"\", \"araValue\": \"\", \"askDeviceTypeAtSignOn\": \"DON'T ASK\", \"askDeviceTypeAtSignOnCd\": 0, \"askTerminalTypeAtLmEntry\": \"\", \"askTerminalTypeAtLmEntryCd\": \"\", \"authorizeReleaseOfNpi\": \"\", \"authorizeReleaseOfNpiCd\": \"\", \"authorizedToWriteMedOrders\": \"YES\", \"authorizedToWriteMedOrdersCd\": 1, \"autoMenu\": \"YES, MENUS GENERATED\", \"autoMenuCd\": 1, \"autoSignOn\": \"No\", \"autoSignOnCd\": 0, \"badgeNumber\": \"\", \"brightCharsAtExitFromLm\": \"\", \"brightCharsAtExitFromLmCd\": \"\", \"canMakeIntoAMailMessage\": \"YES\", \"canMakeIntoAMailMessageCd\": \"y\", \"city\": \"Chantilly\", \"clinicalCoreTrainee\": \"\", \"clinicalCoreTraineeCd\": \"\", \"commercialPhone\": \"\", \"cprsTabs\": { \"cprsTab\": [ { \"cprsTab\": \"COR\", \"cprsTabId\": 1, \"effectiveDate\": \"NOV 29,2006\", \"effectiveDateFHIR\": \"2006-11-29\", \"effectiveDateFM\": 3061129, \"effectiveDateHL7\": 20061129, \"expirationDate\": \"\", \"expirationDateFHIR\": \"\", \"expirationDateFM\": \"\", \"expirationDateHL7\": \"\", \"resourceId\": \"V-500-200-11520-200.010113-1\" } ] }, \"creator\": \"WARDCLERK,FIFTY\", \"creatorId\": 10652, \"currentDegreeLevel\": \"\", \"currentDegreeLevelId\": \"\", \"dateAccessCodeLastChanged\": \"MAY 24,2016\", \"dateAccessCodeLastChangedFHIR\": \"2016-05-24\", \"dateAccessCodeLastChangedFM\": 3160524, \"dateAccessCodeLastChangedHL7\": 20160524, \"dateESigLastChanged\": \"JAN 11,2018\", \"dateEntered\": \"MAR 17,1994\", \"dateEnteredFHIR\": \"1994-03-17\", \"dateEnteredFM\": 2940317, \"dateEnteredHL7\": 19940317, \"dateExclusionaryListChecked\": \"\", \"dateExclusionaryListCheckedFHIR\": \"\", \"dateExclusionaryListCheckedFM\": \"\", \"dateExclusionaryListCheckedHL7\": \"\", \"dateHl7TraineeRecordBuilt\": \"\", \"dateHl7TraineeRecordBuiltFHIR\": \"\", \"dateHl7TraineeRecordBuiltFM\": \"\", \"dateHl7TraineeRecordBuiltHL7\": \"\", \"dateLastAccessedLmWp\": \"\", \"dateLastAccessedLmWpFHIR\": \"\", \"dateLastAccessedLmWpFM\": \"\", \"dateLastAccessedLmWpHL7\": \"\", \"dateNoLongerTrainee\": \"\", \"dateNoLongerTraineeFHIR\": \"\", \"dateNoLongerTraineeFM\": \"\", \"dateNoLongerTraineeHL7\": \"\", \"dateVerifyCodeLastChanged\": \"APR 10,2005\", \"dea\": \"\", \"deaExpirationDate\": \"\", \"deaExpirationDateFHIR\": \"\", \"deaExpirationDateFM\": \"\", \"deaExpirationDateHL7\": \"\", \"defaultTerminalTypeForLm\": \"\", \"defaultTerminalTypeForLmId\": \"\", \"degree\": \"\", \"delegateOf\": \"\", \"delegateOfId\": \"\", \"delegationDate\": \"\", \"delegationDateFHIR\": \"\", \"delegationDateFM\": \"\", \"delegationDateHL7\": \"\", \"delegationLevel\": \"\", \"deleteAllMailAccess\": \"YES\", \"deleteAllMailAccessCd\": \"y\", \"deleteKeysAtTermination\": \"NO\", \"deleteKeysAtTerminationCd\": \"n\", \"detoxMaintenanceIdNumber\": \"\", \"digitalPager\": \"\", \"displayHelpAtEntryToLm\": \"\", \"displayHelpAtEntryToLmCd\": \"\", \"displayLmCommands\": \"\", \"displayLmCommandsCd\": \"\", \"disuser\": \"\", \"disuserCd\": \"\", \"divisions\": { \"division\": [ { \"default\": \"\", \"defaultCd\": \"\", \"division\": \"CAMP MASTER\", \"divisionId\": 500, \"resourceId\": \"V-500-200-11520-200.02-500\" } ] }, \"dob\": \"\", \"dobFHIR\": \"1941-12-07\", \"dobFM\": \"\", \"dobHL7\": \"\", \"electronicSignatureCode\": \"\", \"emailAddress\": \"\", \"endDateOfTempAddress\": \"\", \"endDateOfTempAddressFHIR\": \"\", \"endDateOfTempAddressFM\": \"\", \"endDateOfTempAddressHL7\": \"\", \"entryLastEditDate\": \"MAY 24,2016\", \"entryLastEditDateFHIR\": \"2016-05-24\", \"entryLastEditDateFM\": 3160524, \"entryLastEditDateHL7\": 20160524, \"enumerationCompleted\": \"\", \"enumerationCompletedFHIR\": \"\", \"enumerationCompletedFM\": \"\", \"enumerationCompletedHL7\": \"\", \"enumerationInitiated\": \"\", \"enumerationInitiatedFHIR\": \"\", \"enumerationInitiatedFM\": \"\", \"enumerationInitiatedHL7\": \"\", \"essCustomerId\": \"\", \"essPeople\": \"\", \"exclusionaryCheckPerformed\": \"\", \"exclusionaryCheckPerformedCd\": \"\", \"exclusionaryCheckedBy\": \"\", \"exclusionaryCheckedById\": \"\", \"faxNumber\": \"\", \"fileManagerAccessCode\": \"\", \"fileRange\": \"\", \"fyAssigned\": \"\", \"fyAssignedFHIR\": \"\", \"fyAssignedFM\": \"\", \"fyAssignedHL7\": \"\", \"fyear\": \"\", \"hinqEmployeeNumber\": \"\", \"immediateSupervisor\": \"\", \"immediateSupervisorId\": \"\", \"inactiveDate\": \"\", \"inactiveDateFHIR\": \"\", \"inactiveDateFM\": \"\", \"inactiveDateHL7\": \"\", \"initial\": \"\", \"keyDelegationLevel\": \"\", \"keyss\": { \"keys\": [ { \"dateGiven\": \"MAR 10,2010\", \"dateGivenFHIR\": \"2010-03-10\", \"dateGivenFM\": 3100310, \"dateGivenHL7\": 20100310, \"givenBy\": \"POSTMASTER\", \"givenById\": 0.5, \"key\": \"DG SENSITIVITY\", \"keyId\": 25, \"resourceId\": \"V-500-200-11520-200.051-25\", \"reviewDate\": \"\", \"reviewDateFHIR\": \"\", \"reviewDateFM\": \"\", \"reviewDateHL7\": \"\" }, { \"dateGiven\": \"MAR 10,2010\", \"dateGivenFHIR\": \"2010-03-10\", \"dateGivenFM\": 3100310, \"dateGivenHL7\": 20100310, \"givenBy\": \"POSTMASTER\", \"givenById\": 0.5, \"key\": \"RA PTENTRY\", \"keyId\": 78, \"resourceId\": \"V-500-200-11520-200.051-78\", \"reviewDate\": \"\", \"reviewDateFHIR\": \"\", \"reviewDateFM\": \"\", \"reviewDateHL7\": \"\" }, { \"dateGiven\": \"MAR 10,2010\", \"dateGivenFHIR\": \"2010-03-10\", \"dateGivenFM\": 3100310, \"dateGivenHL7\": 20100310, \"givenBy\": \"POSTMASTER\", \"givenById\": 0.5, \"key\": \"RA PTEDIT\", \"keyId\": 79, \"resourceId\": \"V-500-200-11520-200.051-79\", \"reviewDate\": \"\", \"reviewDateFHIR\": \"\", \"reviewDateFM\": \"\", \"reviewDateHL7\": \"\" }, { \"dateGiven\": \"MAR 10,2010\", \"dateGivenFHIR\": \"2010-03-10\", \"dateGivenFM\": 3100310, \"dateGivenHL7\": 20100310, \"givenBy\": \"POSTMASTER\", \"givenById\": 0.5, \"key\": \"RA XUSEC\", \"keyId\": 80, \"resourceId\": \"V-500-200-11520-200.051-80\", \"reviewDate\": \"\", \"reviewDateFHIR\": \"\", \"reviewDateFM\": \"\", \"reviewDateHL7\": \"\" }, { \"dateGiven\": \"MAR 10,2010\", \"dateGivenFHIR\": \"2010-03-10\", \"dateGivenFM\": 3100310, \"dateGivenHL7\": 20100310, \"givenBy\": \"POSTMASTER\", \"givenById\": 0.5, \"key\": \"RA DELEXAM\", \"keyId\": 81, \"resourceId\": \"V-500-200-11520-200.051-81\", \"reviewDate\": \"\", \"reviewDateFHIR\": \"\", \"reviewDateFM\": \"\", \"reviewDateHL7\": \"\" }, { \"dateGiven\": \"MAR 10,2010\", \"dateGivenFHIR\": \"2010-03-10\", \"dateGivenFM\": 3100310, \"dateGivenHL7\": 20100310, \"givenBy\": \"POSTMASTER\", \"givenById\": 0.5, \"key\": \"RA MGR\", \"keyId\": 82, \"resourceId\": \"V-500-200-11520-200.051-82\", \"reviewDate\": \"\", \"reviewDateFHIR\": \"\", \"reviewDateFM\": \"\", \"reviewDateHL7\": \"\" }, { \"dateGiven\": \"MAR 10,2010\", \"dateGivenFHIR\": \"2010-03-10\", \"dateGivenFM\": 3100310, \"dateGivenHL7\": 20100310, \"givenBy\": \"POSTMASTER\", \"givenById\": 0.5, \"key\": \"RA DELETERPT\", \"keyId\": 83, \"resourceId\": \"V-500-200-11520-200.051-83\", \"reviewDate\": \"\", \"reviewDateFHIR\": \"\", \"reviewDateFM\": \"\", \"reviewDateHL7\": \"\" }, { \"dateGiven\": \"MAR 10,2010\", \"dateGivenFHIR\": \"2010-03-10\", \"dateGivenFM\": 3100310, \"dateGivenHL7\": 20100310, \"givenBy\": \"POSTMASTER\", \"givenById\": 0.5, \"key\": \"RA SITE\", \"keyId\": 85, \"resourceId\": \"V-500-200-11520-200.051-85\", \"reviewDate\": \"\", \"reviewDateFHIR\": \"\", \"reviewDateFM\": \"\", \"reviewDateHL7\": \"\" }, { \"dateGiven\": \"MAR 10,2010\", \"dateGivenFHIR\": \"2010-03-10\", \"dateGivenFM\": 3100310, \"dateGivenHL7\": 20100310, \"givenBy\": \"POSTMASTER\", \"givenById\": 0.5, \"key\": \"RA VERIFY\", \"keyId\": 86, \"resourceId\": \"V-500-200-11520-200.051-86\", \"reviewDate\": \"\", \"reviewDateFHIR\": \"\", \"reviewDateFM\": \"\", \"reviewDateHL7\": \"\" }, { \"dateGiven\": \"MAR 10,2010\", \"dateGivenFHIR\": \"2010-03-10\", \"dateGivenFM\": 3100310, \"dateGivenHL7\": 20100310, \"givenBy\": \"POSTMASTER\", \"givenById\": 0.5, \"key\": \"RA ONLINE\", \"keyId\": 163, \"resourceId\": \"V-500-200-11520-200.051-163\", \"reviewDate\": \"\", \"reviewDateFHIR\": \"\", \"reviewDateFM\": \"\", \"reviewDateHL7\": \"\" }, { \"dateGiven\": \"MAR 10,2010\", \"dateGivenFHIR\": \"2010-03-10\", \"dateGivenFM\": 3100310, \"dateGivenHL7\": 20100310, \"givenBy\": \"POSTMASTER\", \"givenById\": 0.5, \"key\": \"PROVIDER\", \"keyId\": 236, \"resourceId\": \"V-500-200-11520-200.051-236\", \"reviewDate\": \"\", \"reviewDateFHIR\": \"\", \"reviewDateFM\": \"\", \"reviewDateHL7\": \"\" }, { \"dateGiven\": \"MAR 10,2010\", \"dateGivenFHIR\": \"2010-03-10\", \"dateGivenFM\": 3100310, \"dateGivenHL7\": 20100310, \"givenBy\": \"POSTMASTER\", \"givenById\": 0.5, \"key\": \"ORES\", \"keyId\": 269, \"resourceId\": \"V-500-200-11520-200.051-269\", \"reviewDate\": \"\", \"reviewDateFHIR\": \"\", \"reviewDateFM\": \"\", \"reviewDateHL7\": \"\" }, { \"dateGiven\": \"MAR 10,2010\", \"dateGivenFHIR\": \"2010-03-10\", \"dateGivenFM\": 3100310, \"dateGivenHL7\": 20100310, \"givenBy\": \"POSTMASTER\", \"givenById\": 0.5, \"key\": \"RA ALLOC\", \"keyId\": 370, \"resourceId\": \"V-500-200-11520-200.051-370\", \"reviewDate\": \"\", \"reviewDateFHIR\": \"\", \"reviewDateFM\": \"\", \"reviewDateHL7\": \"\" }, { \"dateGiven\": \"MAR 10,2010\", \"dateGivenFHIR\": \"2010-03-10\", \"dateGivenFM\": 3100310, \"dateGivenHL7\": 20100310, \"givenBy\": \"POSTMASTER\", \"givenById\": 0.5, \"key\": \"MAGDISP ADMIN\", \"keyId\": 470, \"resourceId\": \"V-500-200-11520-200.051-470\", \"reviewDate\": \"\", \"reviewDateFHIR\": \"\", \"reviewDateFM\": \"\", \"reviewDateHL7\": \"\" }, { \"dateGiven\": \"MAR 10,2010\", \"dateGivenFHIR\": \"2010-03-10\", \"dateGivenFM\": 3100310, \"dateGivenHL7\": 20100310, \"givenBy\": \"POSTMASTER\", \"givenById\": 0.5, \"key\": \"MAGDISP CLIN\", \"keyId\": 535, \"resourceId\": \"V-500-200-11520-200.051-535\", \"reviewDate\": \"\", \"reviewDateFHIR\": \"\", \"reviewDateFM\": \"\", \"reviewDateHL7\": \"\" } ] }, \"keystrokesFromLmWp\": \"\", \"language\": \"\", \"languageId\": \"\", \"lastOptionAccessed\": \"\", \"lastOptionAccessedId\": \"\", \"lastOptionMainMenu\": \"\", \"lastSignOnDateTime\": \"\", \"lastSignOnDateTimeFHIR\": \"\", \"lastSignOnDateTimeFM\": \"\", \"lastSignOnDateTimeHL7\": \"\", \"lastTrainingMonthYear\": \"\", \"lockoutUserUntil\": \"\", \"lockoutUserUntilFHIR\": \"\", \"lockoutUserUntilFM\": \"\", \"lockoutUserUntilHL7\": \"\", \"mailCode\": \"10BA1\\/ADP\", \"multiDeviceDespooling\": \"YES\", \"multiDeviceDespoolingCd\": \"y\", \"multipleSignOn\": \"ALLOWED\", \"multipleSignOnCd\": 1, \"multipleSignOnLimit\": \"\", \"name\": \"SIX,PHYSICIAN\", \"nameComponents\": 200, \"nameComponentsId\": 466, \"networkUsername\": \"\", \"nickName\": \"\", \"nonVaPrescriber\": \"\", \"nonVaPrescriberCd\": \"\", \"npIen\": 11520, \"npi\": 9990004688, \"npiEntryStatus\": \"\", \"npiEntryStatusCd\": \"\", \"officePhone\": \"\", \"onExclusionaryList\": \"\", \"onExclusionaryListCd\": \"\", \"pac\": \"\", \"paidEmployee\": \"\", \"paidEmployeeId\": \"\", \"patientSelectionList\": \"\", \"patientSelectionListId\": \"\", \"personClasss\": { \"personClass\": [ { \"effectiveDate\": \"NOV 29,2006\", \"effectiveDateFHIR\": \"2006-11-29\", \"effectiveDateFM\": 3061129, \"effectiveDateHL7\": 20061129, \"expirationDate\": \"\", \"expirationDateFHIR\": \"\", \"expirationDateFM\": \"\", \"expirationDateHL7\": \"\", \"personClass\": \"Physicians (M.D. and D.O.)\", \"personClassId\": 1, \"resourceId\": \"V-500-200-11520-200.05-1\", \"x12Code\": \"203B00000N\" } ] }, \"personFilePointer\": \"\", \"personFilePointerId\": 10395, \"pgyAssigned\": \"\", \"pgyAssignedFHIR\": \"\", \"pgyAssignedFM\": \"\", \"pgyAssignedHL7\": \"\", \"pgyear\": \"\", \"phone3\": \"\", \"phone4\": \"\", \"phoneHome\": \"\", \"positionTitle\": \"\", \"positionTitleCd\": \"\", \"preferredEditor\": \"\", \"preferredEditorId\": \"SCREEN EDITOR - VA FILEMAN\", \"primaryMenuOption\": \"ZZ TRAINING MENU\", \"primaryMenuOptionId\": 9581, \"primaryWindow\": \"\", \"primaryWindowId\": \"\", \"problemListPrimaryView\": \"\", \"problemSelectionList\": \"\", \"problemSelectionListId\": \"\", \"programOfStudy\": \"\", \"programOfStudyId\": \"\", \"prohibitedTimesForSignOn\": \"\", \"providerClass\": \"\", \"providerClassId\": \"\", \"providerKey\": 1, \"providerType\": \"\", \"providerTypeCd\": \"\", \"radNucMedInactiveDate\": \"\", \"radNucMedInactiveDateFHIR\": \"\", \"radNucMedInactiveDateFM\": \"\", \"radNucMedInactiveDateHL7\": \"\", \"rank\": \"\", \"remarks\": \"\", \"renewDate\": \"\", \"renewDateFHIR\": \"\", \"renewDateFM\": \"\", \"renewDateHL7\": \"\", \"requiresCosigner\": \"\", \"requiresCosignerCd\": \"\", \"requiresTransmission\": \"\", \"requiresTransmissionCd\": \"\", \"reserved\": \"\", \"resourceId\": \"V-500-200-11520\", \"resourceType\": \"Provider\", \"restrictPatientSelection\": \"NO\", \"restrictPatientSelectionCd\": 0, \"room\": \"\", \"scheduleIiNarcotic\": \"\", \"scheduleIiNarcoticCd\": \"\", \"scheduleIiNonNarcotic\": \"\", \"scheduleIiNonNarcoticCd\": \"\", \"scheduleIiiNarcotic\": \"\", \"scheduleIiiNarcoticCd\": \"\", \"scheduleIiiNonNarcotic\": \"\", \"scheduleIiiNonNarcoticCd\": \"\", \"scheduleIv\": \"\", \"scheduleIvCd\": \"\", \"scheduleV\": \"\", \"scheduleVCd\": \"\", \"secid\": \"\", \"secondaryMenuOptionss\": { \"secondaryMenuOptions\": [ { \"resourceId\": \"V-500-200-11520-200.03-1\", \"secondaryMenuOptions\": \"OR CPRS GUI CHART\", \"secondaryMenuOptionsId\": 10989, \"synonym\": \"\" }, { \"resourceId\": \"V-500-200-11520-200.03-2\", \"secondaryMenuOptions\": \"PXRM CPRS CONFIGURATION\", \"secondaryMenuOptionsId\": 11610, \"synonym\": \"\" }, { \"resourceId\": \"V-500-200-11520-200.03-3\", \"secondaryMenuOptions\": \"HMP UI CONTEXT\", \"secondaryMenuOptionsId\": 14321, \"synonym\": \"\" } ] }, \"serviceSection\": \"MEDICINE\", \"serviceSectionId\": 2, \"sex\": \"F\", \"sexCd\": \"\", \"signatureBlockPrintedName\": \"PHYSICIAN SIX\", \"signatureBlockTitle\": \"\", \"socialWorker\": \"\", \"socialWorkerCd\": \"\", \"socialWorkerSNumber\": \"\", \"ssn\": 666000424, \"staffReviewRequired\": \"\", \"staffReviewRequiredCd\": \"\", \"startDateOfTempAddres\": \"\", \"startDateOfTempAddresFHIR\": \"\", \"startDateOfTempAddresFM\": \"\", \"startDateOfTempAddresHL7\": \"\", \"startOfTraining\": \"\", \"startOfTrainingFHIR\": \"\", \"startOfTrainingFM\": \"\", \"startOfTrainingHL7\": \"\", \"startupDefault\": \"\", \"startupDefaultCd\": \"\", \"state\": \"VIRGINIA\", \"stateId\": 51, \"streetAddress1\": \"5155 Parkstone Drive\", \"streetAddress2\": \"\", \"streetAddress3\": \"\", \"subjectAlternativeName\": \"\", \"subjectOrganization\": \"\", \"subjectOrganizationId\": \"\", \"supplyEmployee\": \"\", \"supplyEmployeeCd\": \"\", \"surrogate\": \"\", \"surrogateId\": \"\", \"taxId\": \"\", \"temporaryAddress1\": \"\", \"temporaryAddress2\": \"\", \"temporaryAddress3\": \"\", \"temporaryCity\": \"\", \"temporaryState\": \"\", \"temporaryStateId\": \"\", \"temporaryZipCode\": \"\", \"terminalTypeLastUsed\": \"\", \"terminalTypeLastUsedId\": \"\", \"terminationDate\": \"\", \"terminationDateFHIR\": \"\", \"terminationDateFM\": \"\", \"terminationDateHL7\": \"\", \"terminationReason\": \"\", \"textTerminator\": \"\", \"timedReadOfSeconds\": 5400, \"timestamp\": \"65094,33952\", \"title\": \"Physician\", \"titleId\": 56, \"totalMinutesUsingLmWp\": \"\", \"typeAhead\": \"ALLOWED\", \"typeAheadCd\": \"Y\", \"uniqueUserId\": \"\", \"usualCosigner\": \"\", \"usualCosignerId\": \"\", \"va\": \"\", \"verifyCode\": \"\", \"verifyCodeNeverExpires\": \"Yes\", \"verifyCodeNeverExpiresCd\": 1, \"vhaTrainingFacility\": \"\", \"vhaTrainingFacilityId\": \"\", \"voicePager\": \"\", \"vpid\": \"\", \"wantToEditAccessCodeYN\": \"\", \"wantToEditVerifyCodeYN\": \"\", \"xusActiveUser\": \"No\", \"xusActiveUserCd\": 0, \"xusLogonAttemptCount\": \"\", \"zipCode\": 20151 } }";
        PractitionerParser parser = new PractitionerParser();
        Optional<Practitioner> result = parser.parseSingle(input);
        Practitioner practitioner = result.get();
        Assert.assertEquals("Correct ID", "V-500-200-11520", practitioner.getId());
        Assert.assertEquals("Correct given name", "PHYSICIAN", practitioner.getName().get(0).getGivenAsSingleString());
        Assert.assertEquals("Correct family name", "SIX", practitioner.getName().get(0).getFamily());
        Assert.assertEquals("Correct gender", Enumerations.AdministrativeGender.FEMALE, practitioner.getGender());
        Address address = result.get().getAddress().get(0);
        Assert.assertEquals("Correct Street", "5155 Parkstone Drive", address.getLine().get(0).toString());
        Assert.assertEquals("Correct City", "Chantilly", address.getCity());
        Assert.assertEquals("Correct State", "VIRGINIA", address.getState());
        Assert.assertEquals("Correct Zip", "20151", address.getPostalCode());

        Date expectedDate = new Date();
        try {
            SimpleDateFormat sdf = new SimpleDateFormat("dd-M-yyyy");
            expectedDate = sdf.parse("07-12-1941");
        } catch (ParseException px) {}

        Assert.assertEquals("Birthdate is 12/7/1941", expectedDate, practitioner.getBirthDate());
        Assert.assertTrue("Practitioner is active", practitioner.getActive());
    }

    @Test
    public void TestSinglePractitionerParseBlankInput() {
        String input = "";

        PractitionerParser parser = new PractitionerParser();

        Optional<Practitioner> result = parser.parseSingle(input);

        Assert.assertEquals("No result", Optional.empty(), result);
    }

    @Test
    public void TestSinglePractitionerParseNullInput() {

        PractitionerParser parser = new PractitionerParser();

        Optional<Practitioner> result = parser.parseSingle(null);

        Assert.assertEquals("No result", Optional.empty(), result);
    }
}
